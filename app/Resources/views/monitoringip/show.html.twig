{% extends 'base.html.twig' %}

{% block title %}Monitoring Tool{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="//cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">

{% endblock %}

{% block body %}
    <h2 class="genus-name">IP Address {{ ip }}</h2>

    <div class="container" id="tableContent">
        <div class="row">

            <div class="col-lg-12">
                <div id="tableContent">
                    {{ include(':monitoringip:_table.html.twig', {'snmpList': snmpList}) }}
                </div>
            </div>

        </div>
    </div>
    <div class="container">
        <h1>Charts of the Interface {{ interface }}</h1>
        <div class="row">
            <div class="col-lg-12">
                <div class="col-md-6">
                    <div id="lineChartInOctets">
                    </div>
                </div>
                <div class="col-md-6">
                    <div id="lineChartOutOctets">
                    </div>
                </div>
            </div>
        </div>
    </div>



{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="//cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript">
        var auto_refresh = setInterval(function () {
            $.ajax({
                url: "{{ path('snmp_new', {'ipAddress': ip})}}",
                type: 'GET',
                success: function(output) {
                    $('body').html(output);
                    {{ gc_draw([lineChartInOctets, lineChartOutOctets ],['lineChartInOctets', 'lineChartOutOctets']) }}
                    $('#table').DataTable();
                }
            });
        }, 10000);
    </script>
    <script>
        $(document).ready(function () {
            $('#table').DataTable();
        });
    </script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="application/javascript">
        {{ gc_draw([lineChartInOctets, lineChartOutOctets ],['lineChartInOctets', 'lineChartOutOctets']) }}
    </script>

{% endblock %}
